<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Laporan Infaq Digital - Musholla An-Nur</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
body { font-family: 'Plus Jakarta Sans', sans-serif; }
</style>
</head>
<body class="bg-[#f8fafc] text-slate-950">

<div class="max-w-4xl mx-auto p-4 md:p-8 space-y-6">

<header class="bg-[#1a4d33] text-white p-6 md:p-8 rounded-2xl shadow-lg">
<h1 class="text-2xl font-black uppercase">MUSHOLLA WAKAF ANNUR</h1>
<p class="text-[10px] uppercase tracking-widest">LAPORAN INFAQ DIGITAL</p>
</header>

<!-- SALDO -->
<div class="bg-[#1e40af] text-white p-8 rounded-2xl text-center">
<p class="text-[11px] uppercase tracking-widest">Saldo Saat Ini</p>
<h2 id="total-balance" class="text-5xl font-black">Rp 0</h2>
</div>

<!-- RINGKASAN -->
<div class="grid grid-cols-2 gap-4">
<div class="bg-white p-6 rounded-xl border-l-8 border-green-500">
<p class="text-[10px] uppercase">Total Masuk</p>
<p id="total-in" class="text-2xl font-black text-green-600">Rp 0</p>
</div>
<div class="bg-white p-6 rounded-xl border-l-8 border-red-500">
<p class="text-[10px] uppercase">Total Keluar</p>
<p id="total-out" class="text-2xl font-black text-red-600">Rp 0</p>
</div>
</div>

<!-- TABEL -->
<div class="bg-white rounded-2xl p-4 overflow-auto">
<table class="w-full text-sm" id="data-table">
<thead class="bg-slate-100">
<tr>
<th class="p-2">Tanggal</th>
<th class="p-2">Keterangan</th>
<th class="p-2">Jenis</th>
<th class="p-2">Nominal</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>

</div>

<script>
const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSMANG5sjM5iCijx8EfEP_o0mm2BtD3i-epE3ozKLCCpZxHq0Mg0cElzmPPxEZ68khccJth42Xtko9l/pub?output=csv";

fetch(sheetURL)
.then(res => res.text())
.then(csv => {
  const rows = csv.split("\n").slice(1);
  let totalIn = 0;
  let totalOut = 0;
  const tbody = document.querySelector("#data-table tbody");

  rows.forEach(row => {
    const cols = row.split(",");
    const tanggal = cols[0];
    const ket = cols[1];
    const jenis = cols[2];
    const nominal = parseInt(cols[3]) || 0;

    if (jenis === "MASUK") totalIn += nominal;
    if (jenis === "KELUAR") totalOut += nominal;

    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td class="p-2">${tanggal}</td>
      <td class="p-2">${ket}</td>
      <td class="p-2 font-bold">${jenis}</td>
      <td class="p-2">Rp ${nominal.toLocaleString("id-ID")}</td>
    `;
    tbody.appendChild(tr);
  });

  document.getElementById("total-in").innerText = "Rp " + totalIn.toLocaleString("id-ID");
  document.getElementById("total-out").innerText = "Rp " + totalOut.toLocaleString("id-ID");
  document.getElementById("total-balance").innerText = "Rp " + (totalIn - totalOut).toLocaleString("id-ID");
});
</script>

</body>
</html>
